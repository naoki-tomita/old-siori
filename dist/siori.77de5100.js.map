{"version":3,"sources":["../src/loader.ts","index.ts"],"names":[],"mappings":"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","file":"siori.77de5100.js","sourceRoot":"..","sourcesContent":["/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/// <reference types=\"@types/googlemaps\" />\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport interface LoaderOptions {\n  apiKey: string;\n  version?: string;\n  libraries?: string[];\n  channel?: string;\n  language?: string;\n  clientId?: string;\n  region?: string;\n}\n\nexport class Loader {\n  public version: string;\n  public apiKey: string;\n  public libraries: string[];\n  public channel: string;\n  public language: string;\n  public clientId: string;\n  public region: string;\n\n  private CALLBACK = \"__google_maps_callback\";\n  private URL = \"https://maps.googleapis.com/maps/api/js\";\n  private callbacks: Array<(e: Event) => any> = [];\n  private done = false;\n  private loading = false;\n  private onerrorEvent: Event;\n\n  constructor({\n    apiKey,\n    libraries = [],\n    channel,\n    language,\n    clientId,\n    region,\n    version\n  }: LoaderOptions) {\n    this.version = version;\n    this.apiKey = apiKey;\n    this.libraries = libraries;\n    this.channel = channel;\n    this.language = language;\n    this.clientId = clientId;\n    this.region = region;\n  }\n\n  public createUrl(): string {\n    let url = this.URL;\n\n    url += \"?callback=\" + this.CALLBACK;\n\n    if (this.apiKey) {\n      url += \"&key=\" + this.apiKey;\n    }\n\n    if (this.libraries.length > 0) {\n      url += \"&libraries=\" + this.libraries.join(\",\");\n    }\n\n    if (this.clientId) {\n      url += \"&client=\" + this.clientId;\n    }\n\n    if (this.channel) {\n      url += \"&channel=\" + this.channel;\n    }\n\n    if (this.language) {\n      url += \"&language=\" + this.language;\n    }\n\n    if (this.region) {\n      url += \"&region=\" + this.region;\n    }\n\n    if (this.version) {\n      url += \"&v=\" + this.version;\n    }\n\n    return url;\n  }\n\n  public load(): Promise<void> {\n    return this.loadPromise();\n  }\n\n  public loadPromise(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.loadCallback((err: Event) => {\n        if (!err) {\n          resolve();\n        } else {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  public loadCallback(fn: (e: Event) => any): void {\n    this.callbacks.push(fn);\n    this.execute();\n  }\n\n  private setScript(): void {\n    const url = this.createUrl();\n    const script = document.createElement(\"script\");\n\n    script.type = \"text/javascript\";\n    script.src = url;\n    script.onerror = this.loadErrorCallback;\n    script.defer = true;\n    script.async = true;\n    document.head.appendChild(script);\n  }\n\n  private loadErrorCallback(e: Event): void {\n    this.onerrorEvent = e;\n    this.callback();\n  }\n\n  private setCallback(): void {\n    (window as any)[this.CALLBACK] = this.callback.bind(this);\n  }\n\n  private callback(): void {\n    this.done = true;\n    this.loading = false;\n\n    this.callbacks.forEach(cb => {\n      cb(this.onerrorEvent);\n    });\n\n    this.callbacks = [];\n  }\n\n  private execute(): void {\n    if (this.done) {\n      this.callback();\n    } else {\n      if (this.loading) {\n        // do nothing but wait\n      } else {\n        this.loading = true;\n        this.setCallback();\n        this.setScript();\n      }\n    }\n  }\n}\n","import { Loader } from \"@googlemaps/loader\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\n\nasync function main() {\n  const loader = new Loader({\n    apiKey: process.env.API_KEY,\n  });\n  await loader.load();\n}\n\nmain();\n"]}